<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mi Perfil - RTZAI</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="components/theme.css">
</head>
<body>
    <div id="navbar-container"></div>

    <main class="container">
        <!-- Header del perfil -->
        <div class="profile-header">
            <div class="profile-avatar-section">
                <img id="profile-avatar" src="" alt="Avatar" class="profile-avatar">
                <button class="btn-edit-avatar" onclick="showEditProfile()">✏️ Editar</button>
            </div>
            <div class="profile-info-section">
                <h1 id="profile-name"></h1>
                <div class="profile-badges">
                    <span id="profile-level-badge" class="badge badge-level"></span>
                    <span id="profile-member-since"></span>
                </div>
                <div class="profile-stats-inline">
                    <span>🎨 <strong id="profile-images-count">0</strong> imágenes</span>
                    <span>❤️ <strong id="profile-likes-count">0</strong> likes</span>
                    <span>👥 <strong id="profile-referrals-count">0</strong> referidos</span>
                </div>
            </div>
        </div>

        <!-- Recompensa Diaria -->
        <div class="daily-reward-card">
            <div class="daily-reward-content">
                <div class="daily-reward-icon">🎁</div>
                <div>
                    <h3>Recompensa Diaria</h3>
                    <p id="daily-reward-description">Reclama tu recompensa diaria</p>
                    <p class="daily-streak">🔥 Racha: <strong id="daily-streak-days">0</strong> días</p>
                </div>
            </div>
            <button id="claim-daily-btn" class="btn-primary" onclick="claimDailyReward()">
                🎁 Reclamar
            </button>
        </div>

        <!-- Tabs -->
        <div class="tabs">
            <button class="tab active" onclick="switchTab('stats')">📊 Estadísticas</button>
            <button class="tab" onclick="switchTab('referrals')">👥 Referidos</button>
            <button class="tab" onclick="switchTab('settings')">⚙️ Configuración</button>
        </div>

        <!-- Sección Estadísticas -->
        <section id="stats-section">
            <h2>📊 Mis Estadísticas</h2>
            
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon">💰</div>
                    <div class="stat-value" id="stat-credits">0</div>
                    <div class="stat-label">Créditos Disponibles</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">💸</div>
                    <div class="stat-value" id="stat-credits-spent">0</div>
                    <div class="stat-label">Créditos Gastados</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">🎨</div>
                    <div class="stat-value" id="stat-total-images">0</div>
                    <div class="stat-label">Imágenes Generadas</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">⭐</div>
                    <div class="stat-value" id="stat-favorites">0</div>
                    <div class="stat-label">Favoritos</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">🏆</div>
                    <div class="stat-value" id="stat-level">1</div>
                    <div class="stat-label">Nivel</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">💎</div>
                    <div class="stat-value" id="stat-referral-earnings">0</div>
                    <div class="stat-label">Créditos por Referidos</div>
                </div>
            </div>

            <!-- Transacciones Recientes -->
            <div class="transactions-section">
                <h3>💳 Transacciones Recientes</h3>
                <div id="recent-transactions" class="transactions-list"></div>
            </div>
        </section>

        <!-- Sección Referidos -->
        <section id="referrals-section" style="display: none;">
            <h2>👥 Sistema de Referidos</h2>
            
            <div class="referral-card">
                <h3>🎉 Invita amigos y gana créditos</h3>
                <p>Comparte tu código de referido y gana <strong>20 créditos</strong> por cada amigo que se registre. ¡Tu amigo también recibirá <strong>10 créditos</strong> de bienvenida!</p>
                
                <div class="referral-code-display">
                    <div class="referral-code-box">
                        <label>Tu Código de Referido</label>
                        <div class="code-display">
                            <span id="referral-code">XXXXXXXX</span>
                            <button class="btn-copy" onclick="copyReferralCode()">📋 Copiar</button>
                        </div>
                    </div>
                    
                    <div class="referral-link-box">
                        <label>Enlace de Invitación</label>
                        <div class="code-display">
                            <input type="text" id="referral-link" readonly>
                            <button class="btn-copy" onclick="copyReferralLink()">📋 Copiar</button>
                        </div>
                    </div>
                </div>
                
                <div class="referral-stats">
                    <div class="referral-stat">
                        <div class="referral-stat-value" id="referral-count">0</div>
                        <div class="referral-stat-label">Amigos Referidos</div>
                    </div>
                    <div class="referral-stat">
                        <div class="referral-stat-value" id="referral-earnings">0</div>
                        <div class="referral-stat-label">Créditos Ganados</div>
                    </div>
                </div>
            </div>

            <!-- Lista de Referidos -->
            <div class="referred-users-section">
                <h3>👥 Amigos Referidos</h3>
                <div id="referred-users-list" class="referred-users-grid"></div>
                <div id="no-referrals" class="empty-state" style="display: none;">
                    <p>Aún no has referido a nadie. ¡Comparte tu código y comienza a ganar créditos!</p>
                </div>
            </div>
        </section>

        <!-- Sección Configuración -->
        <section id="settings-section" style="display: none;">
            <h2>⚙️ Configuración</h2>
            
            <div class="settings-card">
                <h3>👤 Información Personal</h3>
                <div class="form-group">
                    <label>Nombre</label>
                    <input type="text" id="settings-name" class="form-input">
                </div>
                <div class="form-group">
                    <label>Email</label>
                    <input type="email" id="settings-email" class="form-input" disabled>
                    <small>El email no se puede cambiar</small>
                </div>
                <div class="form-group">
                    <label>URL de Foto de Perfil</label>
                    <input type="text" id="settings-picture" class="form-input" placeholder="https://...">
                </div>
                <button class="btn-primary" onclick="saveProfile()">💾 Guardar Cambios</button>
            </div>

            <div class="settings-card">
                <h3>🎨 Preferencias</h3>
                <div class="form-group">
                    <label class="checkbox-label">
                        <input type="checkbox" id="settings-public-profile">
                        <span>Perfil Público (aparece en el ranking de creadores)</span>
                    </label>
                </div>
                <div class="form-group">
                    <label class="checkbox-label">
                        <input type="checkbox" id="settings-notifications">
                        <span>Recibir notificaciones</span>
                    </label>
                </div>
                <button class="btn-primary" onclick="savePreferences()">💾 Guardar Preferencias</button>
            </div>

            <div class="settings-card danger-zone">
                <h3>⚠️ Zona de Peligro</h3>
                <button class="btn-logout" onclick="logout()">🚪 Cerrar Sesión</button>
            </div>
        </section>
    </main>

    <div id="footer-container"></div>

    <script src="components/Navbar.js"></script>
    <script src="components/Footer.js"></script>
    <script src="script.js"></script>
    <script src="perfil.js"></script>
</body>
</html>
